(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6912bb8f"],{"1dde":function(e,t,r){var a=r("d039"),s=r("b622"),o=s("species");e.exports=function(e){return!a((function(){var t=[],r=t.constructor={};return r[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"65f0":function(e,t,r){var a=r("861d"),s=r("e8b5"),o=r("b622"),n=o("species");e.exports=function(e,t){var r;return s(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!s(r.prototype)?a(r)&&(r=r[n],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},8418:function(e,t,r){"use strict";var a=r("c04e"),s=r("9bf2"),o=r("5c6c");e.exports=function(e,t,r){var n=a(t);n in e?s.f(e,n,o(0,r)):e[n]=r}},"99af":function(e,t,r){"use strict";var a=r("23e7"),s=r("d039"),o=r("e8b5"),n=r("861d"),l=r("7b0b"),i=r("50c4"),c=r("8418"),u=r("65f0"),m=r("1dde"),f=r("b622"),p=f("isConcatSpreadable"),d=9007199254740991,h="Maximum allowed index exceeded",b=!s((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=m("concat"),x=function(e){if(!n(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)},k=!b||!v;a({target:"Array",proto:!0,forced:k},{concat:function(e){var t,r,a,s,o,n=l(this),m=u(n,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?n:arguments[t],x(o)){if(s=i(o.length),f+s>d)throw TypeError(h);for(r=0;r<s;r++,f++)r in o&&c(m,f,o[r])}else{if(f>=d)throw TypeError(h);c(m,f++,o)}return m.length=f,m}})},a915:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(e._s(e.id?"编辑":"新建")+"英雄")]),e.reFresh?r("el-form",{ref:"heroForm",staticClass:"demo-form-inline",attrs:{model:e.form,"label-position":"right","label-width":"80px"}},[r("el-tabs",{attrs:{value:"basic",type:"border-card"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"basic"}},[r("el-form-item",{attrs:{label:"英雄名称"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"英雄名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"英雄图标"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload",headers:e.genUploadHeaders(),"show-file-list":!1,"on-success":e.handleUploadSuccess}},[e.form.icon?r("img",{staticClass:"avatar",attrs:{src:e.form.icon}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"英雄banner"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload","show-file-list":!1,"on-success":function(t){return e.form.banner=t.url},headers:e.genUploadHeaders()}},[e.form.banner?r("img",{staticClass:"avatar",attrs:{src:e.form.banner}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"英雄称号"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"英雄称号"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"英雄类型"}},[r("el-select",{attrs:{multiple:""},model:{value:e.form.categories,callback:function(t){e.$set(e.form,"categories",t)},expression:"form.categories"}},e._l(e.categories,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"英雄难度"}},[r("el-rate",{staticStyle:{"margin-top":".6rem"},attrs:{max:9,"show-score":""},model:{value:e.form.scores.difficult,callback:function(t){e.$set(e.form.scores,"difficult",t)},expression:"form.scores.difficult"}})],1),r("el-form-item",{attrs:{label:"英雄技能"}},[r("el-rate",{staticStyle:{"margin-top":".6rem"},attrs:{max:9,"show-score":""},model:{value:e.form.scores.skills,callback:function(t){e.$set(e.form.scores,"skills",t)},expression:"form.scores.skills"}})],1),r("el-form-item",{attrs:{label:"英雄攻击"}},[r("el-rate",{staticStyle:{"margin-top":".6rem"},attrs:{max:9,"show-score":""},model:{value:e.form.scores.attack,callback:function(t){e.$set(e.form.scores,"attack",t)},expression:"form.scores.attack"}})],1),r("el-form-item",{attrs:{label:"英雄生存"}},[r("el-rate",{staticStyle:{"margin-top":".6rem"},attrs:{max:9,"show-score":""},model:{value:e.form.scores.survive,callback:function(t){e.$set(e.form.scores,"survive",t)},expression:"form.scores.survive"}})],1),r("el-form-item",{attrs:{label:"顺风出装"}},[r("el-select",{attrs:{multiple:""},model:{value:e.form.items1,callback:function(t){e.$set(e.form,"items1",t)},expression:"form.items1"}},e._l(e.items,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"逆风出装"}},[r("el-select",{attrs:{multiple:""},model:{value:e.form.items2,callback:function(t){e.$set(e.form,"items2",t)},expression:"form.items2"}},e._l(e.items,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"使用技巧"}},[r("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"英雄使用技巧",type:"textarea",autosize:{minRows:3}},model:{value:e.form.usageTips,callback:function(t){e.$set(e.form,"usageTips",t)},expression:"form.usageTips"}})],1)],1),r("el-tab-pane",{attrs:{label:"技能",name:"skills"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.form.skills.push({})}}},[e._v(e._s("添加技能"))]),r("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.form.skills,(function(t,a){return r("el-col",{key:a,attrs:{md:12}},[r("el-form-item",{attrs:{label:"技能名称"}},[r("el-input",{attrs:{placeholder:"技能名称"},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}})],1),r("el-form-item",{attrs:{label:"技能图标"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload","show-file-list":!1,"on-success":function(r){return e.$set(t,"icon",r.url)},headers:e.genUploadHeaders()}},[t.icon?r("img",{staticClass:"avatar",attrs:{src:t.icon}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"技能描述"}},[r("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",autosize:{minRows:3},placeholder:"技能描述"},model:{value:t.desc,callback:function(r){e.$set(t,"desc",r)},expression:"item.desc"}})],1),r("el-form-item",{attrs:{label:"技能提示"}},[r("el-input",{attrs:{placeholder:"技能小提示"},model:{value:t.tips,callback:function(r){e.$set(t,"tips",r)},expression:"item.tips"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"danger",round:""},on:{click:function(t){return e.form.skills.splice(a,1)}}},[e._v(e._s("删除技能"))])],1)],1)})),1)],1),r("el-tab-pane",{attrs:{label:"搭档",name:"partners"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.form.partners.push({})}}},[e._v(e._s("添加搭档"))]),r("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.form.partners,(function(t,a){return r("el-col",{key:a,attrs:{md:12}},[r("el-form-item",{attrs:{label:"搭档名称"}},[r("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择搭档名称"},model:{value:t.hero,callback:function(r){e.$set(t,"hero",r)},expression:"item.hero"}},e._l(e.allHeros,(function(e){return r("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),r("el-form-item",{attrs:{label:"搭档描述"}},[r("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",autosize:{minRows:3},placeholder:"搭档描述"},model:{value:t.desc,callback:function(r){e.$set(t,"desc",r)},expression:"item.desc"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"danger",round:""},on:{click:function(t){return e.form.partners.splice(a,1)}}},[e._v(e._s("删除搭档"))])],1)],1)})),1)],1)],1),r("el-form-item",{staticStyle:{"margin-top":"20px"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.id?"修改":"保存"))])],1)],1):e._e()],1)},s=[],o=(r("99af"),r("96cf"),r("89ba")),n=r("ecb4"),l={components:{},props:{id:String},mixins:[n["a"]],created:function(){this.fetchCatAndItemsAndHeros(),this.id&&this.fetchHeroInfo(this.id)},data:function(){return{reFresh:!0,form:{name:"",icon:"",title:"",banner:"",categories:[],scores:{},skills:[],partners:[]},categories:[],items:[],allHeros:[]}},methods:{fetchCatAndItemsAndHeros:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/rest/categories");case 2:return t=e.sent,e.next=5,this.$http.get("/rest/items");case 5:return r=e.sent,e.next=8,this.$http.get("/rest/hero");case 8:a=e.sent,this.categories=t.data,this.items=r.data,this.allHeros=a.data;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchHeroInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/rest/heros/".concat(t));case 2:r=e.sent,this.form=Object.assign({},this.form,r.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleUploadSuccess:function(e){this.form.icon=e.url},onSubmit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=null,!this.id){e.next=7;break}return e.next=4,this.$http.put("/rest/heros/".concat(this.id),this.form);case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,this.$http.post("/rest/heros",this.form);case 9:t=e.sent;case 10:this.$router.push("/admin/hero/list"),this.$message({type:"success",message:"".concat(t.status,"，").concat(this.id?"修改成功":"保存成功"," ")});case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},i=l,c=r("2877"),u=Object(c["a"])(i,a,s,!1,null,null,null);t["default"]=u.exports},e8b5:function(e,t,r){var a=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}},ecb4:function(e,t,r){"use strict";t["a"]={methods:{genUploadHeaders:function(){return{Authorization:"Bearer ".concat(localStorage.token||"")}}}}}}]);
//# sourceMappingURL=chunk-6912bb8f.77801193.js.map